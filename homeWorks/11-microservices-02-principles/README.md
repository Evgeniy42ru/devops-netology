
# Домашнее задание к занятию [«Микросервисы: принципы»](https://github.com/netology-code/micros-homeworks/blob/main/11-microservices-02-principles.md)

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway 

>Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.
>
>Решение должно соответствовать следующим требованиям:
>- маршрутизация запросов к нужному сервису на основе конфигурации,
>- возможность проверки аутентификационной информации в запросах,
>- обеспечение терминации HTTPS.
>
>Обоснуйте свой выбор.

### Ответ:

| Решение | маршрутизация на основе конфигурации | проверка аутентификации | терминация HTTPS |
|---------|--------------------------------------|-------------------------|------------------|
| [haproxy](https://www.haproxy.com/solutions/api-gateway) | есть | есть | есть |
| [traefik](https://traefik.io/solutions/api-gateway/)     | есть | есть | есть |
| [tyk](https://tyk.io/open-source-api-gateway/)           | есть | есть | есть |

Выбрал 3 популярных решения подходящих по требованиям.
Именно эти решения т.к. есть подробная документация, активноее сообщество, решения активно используются в боевых средах.  

## Задача 2: Брокер сообщений

>Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.
>
>Решение должно соответствовать следующим требованиям:
>- поддержка кластеризации для обеспечения надёжности,
>- хранение сообщений на диске в процессе доставки,
>- высокая скорость работы,
>- поддержка различных форматов сообщений,
>- разделение прав доступа к различным потокам сообщений,
>- простота эксплуатации.
>
>Обоснуйте свой выбор.

### Ответ:

| Решение | [RabbitMq](https://www.rabbitmq.com/)     | [ActiveMq](https://activemq.apache.org/features) | [kafka](https://kafka.apache.org) |
|-----------------------------------------------------|---------|---------|---------|
|Поддержка кластеризации для обеспечения надёжности   |    +    |    +    |    +-   | 
|Хранение сообщений на диске в процессе доставки      |    +    |    +    |    +    |
|Высокая скорость работы                              |   +-(медленнее kafka)    |    +    |    +-(снижается при росте кол-ва потребителей)    |
|Поддержка различных форматов сообщений               |любой текстовый формат|любой текстовый формат|любой текстовый формат|
|Разделение прав доступа к различным потокам сообщений|    +    |    +    |    +    |
|Простота эксплуатации                                |    +    |    +-   |    +-   |

Все решения используются в production, большое сообщество, подробные документации. При выборе решения нужно детальнее разобраться что нам нужно, т.к. каждое решение имеет свои особенности. 
К примеру kafka отлично подходит для реализации "event-driven architecture" но не заточен под возврат сообщений в топик для повторной обработки сообщений. RabbitMq отлично работает с возвратом сообщений в очередь но не удобен для реализации "event-driven architecture". 

---